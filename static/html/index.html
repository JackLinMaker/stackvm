<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
<title>stackVM</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="StyleSheet" href="/css/workspace.css" type="text/css">
<link rel="StyleSheet" href="/css/vm.css" type="text/css">
<link rel="StyleSheet" href="/css/window.css" type="text/css">
<link rel="StyleSheet" href="/css/sidebar.css" type="text/css">

<script src="/js/vendor/jquery.js"></script>
<script src="/js/vendor/jquery-ui.js"></script>
<script src="/js/vendor/jquery.mousewheel.js"></script>

<script type="text/javascript" src="/js/dnode.js"></script>
<script type="text/javascript" src="/js/util/events.js"></script>
<script type="text/javascript" src="/js/util/keymap.js"></script>
<script type="text/javascript" src="/js/session.js"></script>
<script type="text/javascript" src="/js/workspace.js"></script>
<script type="text/javascript" src="/js/display.js"></script>
<script type="text/javascript" src="/js/fb.js"></script>
<script type="text/javascript" src="/js/chat.js"></script>
<script type="text/javascript" src="/js/window.js"></script>
<script type="text/javascript" src="/js/sidebar.js"></script>
<script type="text/javascript" src="/js/titlebar.js"></script>
<script type="text/javascript" src="/js/quickbar.js"></script>
<script type="text/javascript">
    $(window).load(function () {
        $('form#login')[0].elements['user'].focus();
        
        $('form#login').submit(function (ev) {
            ev.preventDefault();
        });
        
        var form = $('form#login');
        form.submit(function (ev) {
            ev.preventDefault();
            
            var user = this.elements.user.value;
            var pass = this.elements.pass.value;
            Session(user, pass, function (ok) {
                if (ok) {
                    $('form#login').fadeOut(400);
                }
                else {
                    $('.sign-in-failed').remove();
                    form.append($('<div>')
                        .addClass('sign-in-failed')
                        .text('sign-in failed')
                        .fadeIn(400, function () {
                            var elem = $(this);
                            setTimeout(function () {
                                elem.fadeOut(2000);
                            }, 5000);
                        })
                    );
                }
            });
        });
    });
</script>
</head>
<body>
    <div id="workspace">
        <form id="login" method="post">
            <img
                src="/img/stackvm.png"
                width="417" height="100"
            >
            <input type="text" name="user">
            <br>
            <input type="password" name="pass">
            <br>
            <input type="submit" value="sign in">
            <br>
        </form>
    </div>
</body>
</html>
